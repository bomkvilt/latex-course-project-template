\addModuleCode
{
    \usepackage[no-math]{fontspec}
    \usepackage{polyglossia}[2014/05/21]
    \usepackage{xecyr}
    \usepackage{mathtext}
} {
    % set main and additional languages
    \setmainlanguage[babelshorthands=true,indentfirst=true]{russian}
    \setotherlanguage{english}

    \setmainfont{CMU Serif}
    \setsansfont{CMU Sans Serif}
    \setmonofont{CMU Typewriter Text}  
    \setmathfont{Latin Modern Math}

    \DeclareSymbolFont{cyrletters}{\encodingdefault}{\familydefault}{m}{it}
    \newcommand{\makecyrmathletter}[1]
    {
        \begingroup\lccode`a=#1\lowercase{\endgroup
        \Umathcode`a}="0 \csname symcyrletters\endcsname\space #1
    }
    \count255="409
    \loop\ifnum\count255<"44F
        \advance\count255 by 1
        \makecyrmathletter{\count255}
    \repeat
}
