\texCode{<<}
\addModuleCode
{
    \usepackage{amsthm,amsmath,amscd}   % Математические дополнения от AMS
    \usepackage{amsfonts,amssymb}       % Математические дополнения от AMS
    \usepackage{mathtools}              % Добавляет окружение multlined
    \usepackage{xfrac}                  % Красивые дроби
    \usepackage{unicode-math}           % unicode letter in math mode
    \usepackage[
        locale = DE,
        list-separator       = {;\,},
        list-final-separator = {;\,},
        list-pair-separator  = {;\,},
        list-units           = single,
        range-units          = single,
        range-phrase         = {\text{\ensuremath{-}}},
        quotient-mode        = fraction,
        fraction-function    = \sfrac,
        separate-uncertainty,
    ]{siunitx}
    \usepackage{environ } % provides \BODY
    \usepackage{etoolbox} % provides \ifdimcomp
    \usepackage{graphicx} % provides \resizebox

} {
    \sisetup{inter-unit-product = \ensuremath{{}\cdot{}}}


    % -----------------| feet equation to page: https://stackoverflow.com/a/55750239
    % <<
    \newlength{\math@eqlen}
    \newlength{\math@offset} \setlength{\math@offset}{15mm}
    \let\math@old@equation@bgn=\equation
    \let\math@old@equation@end=\endequation

    \RenewEnviron{equation}
    {
        \settowidth{\math@eqlen}{$\BODY$}
        
        \math@old@equation@bgn
        \ifdimcomp{\linewidth - \math@offset}{>}{\math@eqlen}
        { 
            \ensuremath{\BODY} 
        }
        { 
            \resizebox{\linewidth - \math@offset}{!}{\ensuremath{\BODY}}
        }
        \math@old@equation@end
    }
    % <<
    % -----------------|
}
\texCode{>>}
